{"app":{"version":{"available":"1.0.1.201930061500#1","time":null,"linkUpdate":"https://play.google.com/store/apps/details?id=com.ttx.oto247","requireUpdate":false,"app_note":"","message_note":"A new version of the application is available. Please update application! # A new version of the application is available and is required to continue. Please update application!","message":"A new version of the application is available. Please update application!"},"getDetailOto":"function getDetailOto(filter, cb, cheerio) {\r\n\r\n    filter = filter || {}; //console.info(\"filter.regionId: \" + filter.regionId);\r\n    var link = filter.link;\r\n    //IOUtils.log('INFO: getDetailRealEstate', {msg: link});\r\n    fetch(link, {\r\n            headers: new Headers({\r\n                'User-Agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/74.0.3729.157 Safari/537.36',\r\n            })\r\n        })\r\n        .then(function(rp) {\r\n            return rp.text()\r\n        })\r\n        .then(function(text) {\r\n            //https://stackoverflow.com/questions/38343951/how-do-i-parse-an-html-file-in-react-native\r\n\r\n            if (cheerio) {\r\n                $ = cheerio.load(text);\r\n            }\r\n            var detail = {\r\n                basicInfo: {},\r\n                imgs: []\r\n            };\r\n            try {IOUtils.mapping(filter, detail)} catch (error) {};\r\n\r\n            var imgEs = $('#osgslide > img');\r\n\r\n            for (var i = 0; i < imgEs.length; i++) {\r\n                var imgE = imgEs[i];\r\n                var imgLink = $(imgE).attr('src').replace(/\\/crop\\/[0-9]+x[0-9]+/g, '/crop/400x225');\r\n\r\n                if (imgLink) {\r\n                    detail.imgs.push(imgLink);\r\n                }\r\n            }\r\n\r\n            //console.info($('<p>' + (($('.description')).html().replace(/<br\\/*>/g, '\\n')) + '</p>').text());\r\n            //var html = $('.desc .description').html();\r\n            detail.originDescription = $('<p>' + $('.desc .description').html().replace(/<br\\/*>/g, '\\n') + '</p>').text().replace(/[\\n]{2,}/g, '\\n').trim();\r\n            detail.phone = $('.viewmobile .mobile').text().trim();\r\n            detail.price = filter.price;\r\n            detail.priceNum = filter.priceNum;\r\n            detail.price_string = filter.price;\r\n            detail.address = $($('.address')[0]).text();\r\n\r\n            detail.basicInfo.status = {\r\n                name: 'Tình trạng',\r\n                value: $('.infoauto .secondhand').parent().find('span').text().trim().replace(/^\\: */g, '').trim()\r\n            };\r\n            detail.basicInfo.kilomet = {\r\n                name: 'Số km',\r\n                value: $('.infoauto .numofkm').parent().find('span').text().trim().replace(/^\\: */g, '').trim()\r\n            };\r\n            detail.basicInfo.xuatxu = {\r\n                name: 'Xuất xứ',\r\n                value: $('.infoauto .madein').parent().find('span').text().trim().replace(/^\\: */g, '').trim()\r\n            };\r\n            detail.basicInfo.namsx = {\r\n                name: 'Năm SX',\r\n                value: $($('.infoauto .year')[0]).parent().find('span').text().trim().replace(/^\\: */g, '').trim()\r\n            };\r\n            detail.basicInfo.kieudang = {\r\n                name: 'Kiểu dáng',\r\n                value: $('.infoauto .classification').parent().find('span').text().trim().replace(/^\\: */g, '').trim()\r\n            };\r\n            detail.basicInfo.hopso = {\r\n                name: 'Hộp số',\r\n                value: $('.infoauto .tranmission').parent().find('span').text().trim().replace(/^\\: */g, '').trim()\r\n            };\r\n\r\n            var baseinfos = $('.baseinfo .row.highlight')\r\n            for (var i = 0; i < baseinfos.length; i++) {\r\n                var lb = $(baseinfos[i]).find('label').text();\r\n                detail.basicInfo[lb] = {\r\n                    name: lb,\r\n                    value: $(baseinfos[i]).find('span').text()\r\n                };\r\n            }\r\n\r\n\r\n            detail.title = filter.title;\r\n            detail.regionId = filter.regionId;\r\n            detail.link = filter.link;\r\n            detail.id = filter.id;\r\n\r\n            cb && cb(true, detail);\r\n\r\n        })\r\n        .catch(function(error) {\r\n            console.info(error);\r\n            cb && cb(false, {});\r\n        })\r\n}","getListOto":"function getListOto(filter, cb, cheerio) {\r\n\r\n\r\n    /*execSearchHome = function execSearchHome() {\r\n    \tvar textSearch = $(\"#txtKeyword\").val(),\r\n    \t\tmaxprice, minyear, maxyear, minversion, maxversion, bitValue, urlSearch;\r\n    \tif (textSearch = removeSpecial(textSearch.trim()), textSearch != \"\") {\r\n    \t\tvar urlCompleteGetLink = \"/Keyword/AutoCompleteGetLink\",\r\n    \t\t\tdata = {\r\n    \t\t\t\tkeyword: textSearch\r\n    \t\t\t},\r\n    \t\t\tdataComplete, urlComplete = \"\";\r\n    \t\tif ($.ajax({\r\n    \t\t\t\tasync: !1,\r\n    \t\t\t\ttype: \"POST\",\r\n    \t\t\t\turl: urlCompleteGetLink,\r\n    \t\t\t\tdata: data,\r\n    \t\t\t\tsuccess: function(n) {\r\n    \t\t\t\t\tdataComplete = n\r\n    \t\t\t\t},\r\n    \t\t\t\tcomplete: function() {\r\n    \t\t\t\t\tif (dataComplete.result == !0) {\r\n    \t\t\t\t\t\turlComplete = dataComplete.link;\r\n    \t\t\t\t\t\treturn\r\n    \t\t\t\t\t}\r\n    \t\t\t\t}\r\n    \t\t\t}), urlComplete.length > 0) {\r\n    \t\t\tlocation.href = urlComplete;\r\n    \t\t\treturn\r\n    \t\t}\r\n    \t\tlocation.href = \"/search/\" + encodeURI(textSearch);\r\n    \t\treturn\r\n    \t}\r\n    \tvar makeid = $(\"#ShortMakeName\").val(),\r\n    \t\tmodelid = $(\"#ShortModelName\").val(),\r\n    \t\tcityid = $(\"#ShortCityName\").val(),\r\n    \t\tmadein = $(\"#MadeIn\").val() != \"\" ? $(\"#MadeIn\").val() : 0,\r\n    \t\tsecondhand = $(\"#SecondHand\").val() != \"\" ? $(\"#SecondHand\").val() : 0,\r\n    \t\tfueltype = $(\"#FuelType\").val() != \"\" ? $(\"#FuelType\").val() : 0,\r\n    \t\ttransmissionid = $(\"#Transmission\").val() != \"\" ? $(\"#Transmission\").val() : 0,\r\n    \t\tclassifications = $(\"#Classifications\").val() != \"\" ? $(\"#Classifications\").val() : 0,\r\n    \t\texteriorColor = $(\"#ExteriorColor\").val() != \"\" ? eval($(\"#ExteriorColor\").val()) : 0,\r\n    \t\tinteriorColor = 0,\r\n    \t\tnumOfSeat = $(\"#NumOfSeat\").val() != \"\" ? $(\"#NumOfSeat\").val() : 0,\r\n    \t\tnumOfDoor = $(\"#NumOfDoor\").val() != \"\" ? $(\"#NumOfDoor\").val() : 0,\r\n    \t\tminprice = $(\"#minprice\").val();\r\n    \t(minprice == 0 || minprice == \"\" || minprice == \"Từ\") && (minprice = minvalueprice), maxprice = $(\"#maxprice\").val(), (maxprice == 0 || maxprice == \"\" || maxprice == \"Đến\") && (maxprice = maxvalueprice), minprice = eval(minprice), maxprice = eval(maxprice), minyear = $(\"#minyear\").val(), (minyear == 0 || minyear == \"\" || minyear == \"Từ\") && (minyear = minvalueyear), maxyear = $(\"#maxyear\").val(), (maxyear == 0 || maxyear == \"\" || maxyear == \"Đến\") && (maxyear = maxvalueyear), minyear = eval(minyear), maxyear = eval(maxyear), minversion = $(\"#minversion\").val(), (minversion == 0 || minversion == \"\" || minversion == \"Từ\") && (minversion = minvalueyear), maxversion = $(\"#maxversion\").val(), (maxversion == 0 || maxversion == \"\" || maxversion == \"Đến\") && (maxversion = maxvalueyear), minversion = eval(minversion), maxversion = eval(maxversion), bitValue = eval(transmissionid) + eval(secondhand) + eval(madein) + eval(fueltype) + eval(classifications) + eval(numOfSeat) + eval(numOfDoor), urlSearch = BuildSeachLink(makeid, modelid, cityid, bitValue, minprice, maxprice, minyear, maxyear, exteriorColor, interiorColor, minversion, maxversion); \r\n\r\n    \tconsole.info(\"makeid: \" + makeid);\r\n    \tconsole.info(\"modelid: \" + modelid);\r\n    \tconsole.info(\"cityid: \" + cityid);\r\n    \tconsole.info(\"bitValue: \" + bitValue);\r\n    \tconsole.info(\"minprice: \" + minprice);\r\n    \tconsole.info(\"maxprice: \" + maxprice);\r\n    \tconsole.info(\"minyear: \" + minyear);\r\n    \tconsole.info(\"maxyear: \" + maxyear);\r\n    \tconsole.info(\"exteriorColor: \" + exteriorColor);\r\n    \tconsole.info(\"interiorColor: \" + interiorColor);\r\n\r\n    \tconsole.info(\"minversion: \" + minversion);\r\n    \tconsole.info(\"maxversion: \" + maxversion);\r\n\r\n    \tconsole.info(urlSearch);\r\n    }*/\r\n\r\n    filter = filter || {};\r\n\r\n    var link = 'https://oto.com.vn/mua-ban-xe';\r\n\r\n\r\n    var region = filter.region || {};\r\n    var hangxe = filter.hangxe || {};\r\n    var dongxe = filter.dongxe || {};\r\n    var khoanggia = filter.khoanggia || {};\r\n    var khoanggiaValue = khoanggia.value || {};\r\n    khoanggiaValue = khoanggiaValue.value || {};\r\n    var tinhtrang = filter.tinhtrang || {};\r\n    var xuatxu = filter.xuatxu || {};\r\n\r\n    var nhienlieu = filter.nhienlieu || {};\r\n    var hopso = filter.hopso || {};\r\n    var kieudang = filter.kieudang || {};\r\n    var socho = filter.socho || {};\r\n    var socua = filter.socua || {};\r\n\r\n    // console.info(\"filter: \" + JSON.stringify(filter));\r\n    //link += '&sort=' + sort;\r\n\r\n    var transmissionid = hopso.value || 0;\r\n    var secondhand = tinhtrang.value || 0;\r\n    var madein = xuatxu.value || 0;\r\n    var fueltype = nhienlieu.value || 0;\r\n    var classifications = kieudang.value || 0;\r\n    var numOfSeat = socho.value || 0;\r\n    var numOfDoor = socua.value || 0;\r\n    var makeid = hangxe.value;\r\n    var modelid = dongxe.value;\r\n    var cityid = (region.value == -1 || region.value == '-1') ? \"\" : region.value;\r\n    var bitValue = (eval(transmissionid) + eval(secondhand) + eval(madein) + eval(fueltype) + eval(classifications) + eval(numOfSeat) + eval(numOfDoor));\r\n\r\n    console.info(\"khoanggiaValue: \" + JSON.stringify(khoanggiaValue));\r\n    var minprice = Number(khoanggiaValue.from) || 0;\r\n    var maxprice = Number(khoanggiaValue.to) || 99000;\r\n\r\n    var minyear = 0;\r\n    var maxyear = Number(new Date().getFullYear());\r\n    var exteriorColor = 0;\r\n    var interiorColor = 0;\r\n    var minversion = 0;\r\n    var maxversion = Number(new Date().getFullYear());\r\n\r\n    console.info(\"transmissionid: \" + transmissionid);\r\n    console.info(\"secondhand: \" + secondhand);\r\n    console.info(\"madein: \" + madein);\r\n    console.info(\"fueltype: \" + fueltype);\r\n    console.info(\"classifications: \" + classifications);\r\n    console.info(\"numOfSeat: \" + numOfSeat);\r\n    console.info(\"numOfDoor: \" + numOfDoor);\r\n\r\n    console.info(\"makeid: \" + makeid);\r\n    console.info(\"modelid: \" + modelid);\r\n    console.info(\"cityid: \" + cityid);\r\n    console.info(\"bitValue: \" + bitValue);\r\n    console.info(\"minprice: \" + minprice);\r\n    console.info(\"maxprice: \" + maxprice);\r\n    console.info(\"minyear: \" + minyear);\r\n    console.info(\"maxyear: \" + maxyear);\r\n    console.info(\"exteriorColor: \" + exteriorColor);\r\n    console.info(\"interiorColor: \" + interiorColor);\r\n    console.info(\"minversion: \" + minversion);\r\n    console.info(\" ================================================ \");\r\n    var minvalueyear = 0;\r\n    var maxvalueyear = 2019;\r\n    var minvalueprice = 0;\r\n    var maxvalueprice = 99000;\r\n\r\n    //chrome console.info(SingleClassificationName.toString());\r\n    var SingleClassificationName = function SingleClassificationName(bitValue) {\r\n        switch (bitValue) {\r\n            case 1 << 14:\r\n                return \"sedan\";\r\n            case 1 << 15:\r\n                return \"suv\";\r\n            case 1 << 16:\r\n                return \"coupe\";\r\n            case 1 << 17:\r\n                return \"cuv\";\r\n            case 1 << 18:\r\n                return \"hatchback\";\r\n            case 1 << 19:\r\n                return \"convertible\";\r\n            case 1 << 20:\r\n                return \"truck\";\r\n            case 1 << 21:\r\n                return \"van-minivan\";\r\n            case 1 << 22:\r\n                return \"wagon\";\r\n            case 1073741824:\r\n                return \"mpv\";\r\n            case 2147483648:\r\n                return \"pick-up-truck\";\r\n            case 4294967296:\r\n                return \"sport-car\";\r\n            case 8589934592:\r\n                return \"city-car\";\r\n            case 274877906944:\r\n                return \"special-purpose\";\r\n            default:\r\n                return \"\";\r\n        }\r\n    }\r\n\r\n    //chrome console.info(BuildSeachLink.toString());\r\n    var BuildSeachLink = function BuildSeachLink(makeid, modelid, cityid, bitValue, minprice, maxprice, minyear, maxyear, exteriorColor, interiorColor, minversion, maxversion) {\r\n        //Kiểm tra nếu minprice > maxprice thì đổi ngược lại\r\n        var medial = 0;\r\n        if (minprice > maxprice) {\r\n            medial = maxprice;\r\n            maxprice = minprice;\r\n            minprice = medial;\r\n        }\r\n        if (minyear > maxyear) {\r\n            medial = maxyear;\r\n            maxyear = minyear;\r\n            minyear = medial;\r\n        }\r\n        if (makeid == null || makeid == 0) makeid = '';\r\n        if (modelid == null || modelid == 0) modelid = '';\r\n        if (cityid == null || cityid == 0) cityid = '';\r\n        var urlFormat;\r\n        var modelcity = '';\r\n        modelcity = (makeid == '' ? \"\" : \"-\" + makeid) +\r\n            (modelid == '' ? \"\" : \"-\" + modelid) +\r\n            (cityid == '' ? \"\" : \"-\" + cityid);\r\n\r\n        //nếu có có tìm hãng và model, và tìm năm duy nhất thì link mới có dạng: audi-a5-nam-2014\r\n        if (makeid != '' && modelid != '' && minyear != minvalueyear && minyear == maxyear) {\r\n            modelcity += '-nam-' + minyear;\r\n            //gán lại không để năm vào filter value nữa, tránh bị duplicate content\r\n            minyear = minvalueyear;\r\n            maxyear = maxvalueyear;\r\n        }\r\n\r\n\r\n        if (cityid.length == 0 && //không tìm theo tỉnh thành\r\n            makeid == '' && //không tìm theo hãng\r\n            modelid == '' && //không tìm theo model\r\n            minprice == minvalueprice && maxprice == maxvalueprice &&\r\n            interiorColor == 0 && //không tìm theo màu nội thất\r\n            minyear == minvalueyear && maxyear == maxvalueyear && //không tìm theo năm\r\n            minversion == minvalueyear && maxversion == maxvalueyear\r\n        ) {\r\n            ///mua-ban-xe/f83886085555\t    ====>   /mua-ban-xe-cu-da-qua-su-dung\r\n            if ((bitValue & (1 << 23)) == (1 << 23) && (bitValue - (1 << 23)) == 0 && exteriorColor == 0) {\r\n                modelcity += \"-cu-da-qua-su-dung\";\r\n                bitValue = 0; //gán lại bằng 0 để tìm kiếm theo màu kiểm tra, nếu có turnOn các bit khác thì sẽ xuất hiện f12132 thì không có link -mau-ngoai-that nữa\r\n                //alert('/mua-ban-xe-cu-da-qua-su-dung');\r\n            }\r\n\r\n            ////mua-ban-xe/f167772165555    ====>    /mua-ban-xe-moi\r\n            if ((bitValue & (1 << 24)) == (1 << 24) && (bitValue - (1 << 24)) == 0 && exteriorColor == 0) {\r\n                // bitValue chỉ TurnOn bit NhapKhau\r\n                modelcity += \"-moi\";\r\n                bitValue = 0; //gán lại bằng 0 để tìm kiếm theo màu kiểm tra, nếu có turnOn các bit khác thì sẽ xuất hiện f12132 thì không có link -mau-ngoai-that nữa\r\n                //alert('/mua-ban-xe-moi');\r\n            }\r\n        }\r\n\r\n        if (cityid.length == 0 && //không tìm theo tỉnh thành\r\n            makeid != '' && //có tìm theo hãng\r\n            //modelid != '' && //có hoặc không tìm theo model đều được nên rem lại - vinhph\r\n            minprice == minvalueprice && maxprice == maxvalueprice &&\r\n            interiorColor == 0 && //không tìm theo màu nội thất\r\n            minyear == minvalueyear && maxyear == maxvalueyear && //không tìm theo năm\r\n            minversion == minvalueyear && maxversion == maxvalueyear) //không tìm theo giá\r\n        {\r\n            if ((bitValue & (1 << 29)) == (1 << 29) && (bitValue - (1 << 29)) == 0 && exteriorColor == 0) {\r\n                // bitValue chỉ TurnOn bit NhapKhau\r\n                modelcity += \"-nhap-khau\";\r\n                bitValue = 0; //gán lại bằng 0 để tìm kiếm theo màu kiểm tra, nếu có turnOn các bit khác thì sẽ xuất hiện f12132 thì không có link -mau-ngoai-that nữa\r\n            } else if ((bitValue & (1 << 2)) == (1 << 2) && (bitValue - (1 << 2)) == 0 && exteriorColor == 0) {\r\n                // bitValue chỉ TurnOn bit Máy dầu\r\n                modelcity += \"-may-dau\";\r\n                bitValue = 0; //gán lại bằng 0 để tìm kiếm theo màu kiểm tra, nếu có turnOn các bit khác thì sẽ xuất hiện f12132 thì không có link -mau-ngoai-that nữa\r\n            } else if ((bitValue & (1 << 26)) == (1 << 26) && (bitValue - (1 << 26)) == 0 && exteriorColor == 0) {\r\n                // bitValue chỉ TurnOn bit TransmissionSoTuDong\r\n                modelcity += \"-so-tu-dong\";\r\n                bitValue = 0; //gán lại bằng 0 để tìm kiếm theo màu kiểm tra, nếu có turnOn các bit khác thì sẽ xuất hiện f12132 thì không có link -mau-ngoai-that nữa\r\n            } else if ((bitValue & (1 << 23)) == (1 << 23) && (bitValue - (1 << 23)) == 0 && exteriorColor == 0) {\r\n                // bitValue chỉ TurnOn bit SecondHands xe cũ\r\n                modelcity += \"-cu-da-qua-su-dung\";\r\n                bitValue = 0; //gán lại bằng 0 để tìm kiếm theo màu kiểm tra, nếu có turnOn các bit khác thì sẽ xuất hiện f12132 thì không có link -mau-ngoai-that nữa\r\n            } else if ((bitValue & (1 << 24)) == (1 << 24) && (bitValue - (1 << 24)) == 0 && exteriorColor == 0) {\r\n                // bitValue chỉ TurnOn bit SecondHands xe mới\r\n                modelcity += \"-moi\";\r\n                bitValue = 0; //gán lại bằng 0 để tìm kiếm theo màu kiểm tra, nếu có turnOn các bit khác thì sẽ xuất hiện f12132 thì không có link -mau-ngoai-that nữa\r\n            } else if (SingleClassificationName(bitValue) != '' && exteriorColor == 0) {\r\n                // bitValue chỉ TurnOn bit SecondHands xe cũ\r\n                modelcity += \"-dang-\" + SingleClassificationName(bitValue);\r\n                bitValue = 0; //gán lại bằng 0 để tìm kiếm theo màu kiểm tra, nếu có turnOn các bit khác thì sẽ xuất hiện f12132 thì không có link -mau-ngoai-that nữa\r\n            } else if (exteriorColor != 0 && bitValue == 0) // có search Màu ngoại thất\r\n            {\r\n                var arrColor = [{\r\n                    \"Text\": \"Bạc\",\r\n                    \"Value\": \"1\",\r\n                    \"ShortName\": \"bac\"\r\n                }, {\r\n                    \"Text\": \"Tím\",\r\n                    \"Value\": \"2\",\r\n                    \"ShortName\": \"tim\"\r\n                }, {\r\n                    \"Text\": \"Hồng\",\r\n                    \"Value\": \"3\",\r\n                    \"ShortName\": \"hong\"\r\n                }, {\r\n                    \"Text\": \"Trắng\",\r\n                    \"Value\": \"4\",\r\n                    \"ShortName\": \"trang\"\r\n                }, {\r\n                    \"Text\": \"Kem (Be)\",\r\n                    \"Value\": \"5\",\r\n                    \"ShortName\": \"kem\"\r\n                }, {\r\n                    \"Text\": \"Vàng\",\r\n                    \"Value\": \"6\",\r\n                    \"ShortName\": \"vang\"\r\n                }, {\r\n                    \"Text\": \"Nâu\",\r\n                    \"Value\": \"7\",\r\n                    \"ShortName\": \"nau\"\r\n                }, {\r\n                    \"Text\": \"Xanh lam\",\r\n                    \"Value\": \"8\",\r\n                    \"ShortName\": \"lam\"\r\n                }, {\r\n                    \"Text\": \"Đỏ\",\r\n                    \"Value\": \"9\",\r\n                    \"ShortName\": \"do\"\r\n                }, {\r\n                    \"Text\": \"Xanh lục\",\r\n                    \"Value\": \"10\",\r\n                    \"ShortName\": \"luc\"\r\n                }, {\r\n                    \"Text\": \"Xám\",\r\n                    \"Value\": \"11\",\r\n                    \"ShortName\": \"xam\"\r\n                }, {\r\n                    \"Text\": \"Đen\",\r\n                    \"Value\": \"12\",\r\n                    \"ShortName\": \"den\"\r\n                }, {\r\n                    \"Text\": \"Hai màu\",\r\n                    \"Value\": \"13\",\r\n                    \"ShortName\": \"2mau\"\r\n                }, {\r\n                    \"Text\": \"Màu khác\",\r\n                    \"Value\": \"14\",\r\n                    \"ShortName\": \"khac\"\r\n                }];\r\n                var count = 0;\r\n                var colorName = '';\r\n                for (var i = 0; i < arrColor.length; i++) {\r\n                    if ((exteriorColor & eval(1 << arrColor[i].Value)) == (1 << arrColor[i].Value)) {\r\n                        count++;\r\n                        colorName = arrColor[i].ShortName;\r\n                    }\r\n                }\r\n                if (count == 1) {\r\n                    //nếu chỉ tìm đúng 1 mầu\r\n                    modelcity += \"-mau-\" + colorName;\r\n                    exteriorColor = 0; //gán = 0 đề phía dưới không có vào link tìm kiếm dạng /c4-8/\r\n                }\r\n            }\r\n        }\r\n\r\n        if (modelcity != '') {\r\n            modelcity = \"/mua-ban-xe\" + modelcity;\r\n        } else modelcity = \"/mua-ban-xe\";\r\n\r\n        var priceURL = '';\r\n        if (minprice == minvalueprice && maxprice != maxvalueprice) priceURL = '/mlt' + maxprice;\r\n        else if (minprice != minvalueprice && maxprice == maxvalueprice) priceURL = '/mgt' + minprice;\r\n        else if (minprice != minvalueprice && maxprice != maxvalueprice) priceURL = '/m' + minprice + \"-\" + maxprice;\r\n\r\n        var filterURL = '';\r\n\r\n        var yearURL = '';\r\n        if (minyear == minvalueyear && maxyear == maxvalueyear) yearURL = '5555';\r\n        else if (minyear == minvalueyear && maxyear != maxvalueyear && minyear != maxyear) yearURL = '55' + maxyear.toString().substr(2, 2);\r\n        else if (minyear != minvalueyear && maxyear == maxvalueyear && minyear != maxyear) yearURL = minyear.toString().substr(2, 2) + '55';\r\n        else if (minyear > minvalueyear && maxyear <= maxvalueyear) yearURL = minyear.toString().substr(2, 2) + maxyear.toString().substr(2, 2);\r\n        else yearURL = '5555';\r\n\r\n        if (yearURL != '5555' || bitValue != 0) {\r\n            //có tìm hoặc theo năm hoặc theo bitValue\r\n            filterURL = \"/f\" + bitValue + yearURL;\r\n        }\r\n\r\n        var versionURL = '';\r\n        if (minversion == minvalueyear && maxversion != maxvalueyear && minversion != maxversion) versionURL = '/v55' + maxversion.toString().substr(2, 2);\r\n        else if (minversion != minvalueyear && maxversion == maxvalueyear && minversion != maxversion) versionURL = '/v' + minversion.toString().substr(2, 2) + '55';\r\n        else if (minversion > minvalueyear && maxversion <= maxvalueyear) versionURL = '/v' + minversion.toString().substr(2, 2) + maxversion.toString().substr(2, 2);\r\n\r\n        var colorURL = '';\r\n        if (interiorColor != 0 || exteriorColor != 0) {\r\n            // nếu có tìm theo màu\r\n            colorURL = \"/c\" + exteriorColor + \"-\" + interiorColor;\r\n            //if (priceURL == '') priceURL = '/m0-99000'; bỏ đi cho giống server side\r\n            //if (filterURL == '') filterURL = '/f05555'; bỏ đi cho giống server side\r\n        }\r\n        //alert(modelcity + priceURL + filterURL + colorURL + versionURL);\r\n        return modelcity + priceURL + filterURL + colorURL + versionURL;\r\n    }\r\n\r\n    link = \"https://oto.com.vn\" + BuildSeachLink(makeid, modelid, cityid, bitValue, minprice, maxprice, minyear, maxyear, exteriorColor, interiorColor, minversion, maxversion);\r\n    if (filter.page) {\r\n        link += '/p' + filter.page\r\n    }\r\n\r\n    console.info(link);\r\n    fetch(link, {\r\n            headers: new Headers({\r\n                'User-Agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/74.0.3729.157 Safari/537.36',\r\n            })\r\n        })\r\n        .then(function(rp) {\r\n            return rp.text()\r\n        })\r\n        .then(function(text) {\r\n\r\n            //https://www.npmjs.com/package/react-native-cheerio\r\n            var pageItems = [];\r\n\r\n            if (cheerio) {\r\n                $ = cheerio.load(text);\r\n            }\r\n\r\n            var regions = {};\r\n            try {\r\n                var regionList = IOUtils.state.remotes.app.regions;\r\n                regionList.forEach(function(it) {\r\n                    regions[it.code] = true;\r\n                })\r\n            } catch (error) {}\r\n            var its = $('.sellcar-item');\r\n            for (var i = 0; i < its.length; i++) {\r\n\r\n                try {\r\n                    var e = its[i];\r\n                    var p = {};\r\n                    p.id = 'https://oto.com.vn' + $(e).find('.photo a').attr('href');\r\n                    p.link = p.id;\r\n                    p.title = $(e).find('.info .opensanslistauto').text();\r\n                    try {\r\n                        p.imgUrl = $(e).find('.photo img').attr('src').trim().replace(/\\/crop\\/[0-9]+x[0-9]+/g, '');\r\n                    } catch (error) {\r\n                        continue;\r\n                    }\r\n\r\n                    p.price = $(e).find('.pricenew').text().trim();\r\n\r\n                    p.priceNum = 0;\r\n                    var num = p.price.toLocaleLowerCase().match(/[0-9]+/g);\r\n                    if ((p.price.toLocaleLowerCase().indexOf('tỷ') !== -1 || p.price.toLocaleLowerCase().indexOf('tỉ') !== -1) &&\r\n                        (p.price.toLocaleLowerCase().indexOf('triệu') !== -1 || p.price.toLocaleLowerCase().indexOf('tr') !== -1) &&\r\n                        num.length == 2) {\r\n                        p.priceNum = Number(num[0]) * 1000000000 + Number(num[1]) * 1000000;\r\n                        console.info(p.priceNum + \" p.price: \" + p.price);\r\n                    } else if (p.price.toLocaleLowerCase().indexOf('tỷ') !== -1 || p.price.toLocaleLowerCase().indexOf('tỉ') !== -1) {\r\n                        p.priceNum = Number(p.price.replace(/[^0-9]/g, '')) * 1000000000;\r\n                    } else if (p.price.toLocaleLowerCase().indexOf('triệu') !== -1) {\r\n                        p.priceNum = Number(p.price.replace(/[^0-9]/g, '')) * 1000000;\r\n                    }\r\n\r\n                    p.city = $(e).find('.city').text().trim();\r\n                    p.status_string = $(e).find('.seconhand').text().trim();\r\n                    p.isNew = !!(p.status_string === 'Mới');\r\n                    p.year = $(e).find('.year').text().trim();\r\n                    p.kilomet = $(e).find('.icon-speed2').parent().text().trim();\r\n                    p.nhienlieu = $(e).find('.fueltype').text().trim();\r\n                    p.hopso = $(e).find('span.tranmission').text().trim();\r\n                    p.time_post = $(e).find('.newdate').text().trim();\r\n                    p.kieudang = $(e).find('span.classification').text()\r\n                    p.xuatxu = $(e).find('span.madein').text()\r\n                    pageItems.push(p);\r\n                } catch (error) {\r\n                    console.info(error);\r\n                    throw e;\r\n                }\r\n\r\n            }\r\n            cb && cb(true, pageItems);\r\n        })\r\n        .catch(function(error) {\r\n            console.info(error);\r\n            cb && cb(false, []);\r\n        })\r\n}","getOtoRegion":"function getOtoRegion(filter, cb, cheerio) {\r\n\r\n\r\n    try {\r\n        var regions = IOUtils.state.remotes.app.regions;\r\n        if (regions && regions.length) {\r\n            cb && cb(true, regions);\r\n            return;\r\n        }\r\n    } catch (error) {}\r\n\r\n    filter = filter || {};\r\n    var link = 'https://oto.com.vn/City/SearchByName/allcity';\r\n\r\n\r\n    fetch(link, {\r\n            headers: new Headers({\r\n                'User-Agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/74.0.3729.157 Safari/537.36',\r\n            })\r\n        })\r\n        .then(function(rp) {\r\n            return rp.json()\r\n        })\r\n        .then(function(text) {\r\n\r\n            console.info(\"text: \" + text);\r\n            //https://www.npmjs.com/package/react-native-cheerio\r\n            var regions = [];\r\n\r\n            // if (cheerio) {\r\n            //     $ = cheerio.load(text);\r\n            // }\r\n\r\n            // var props = $('#sl-tinh-thanh option');\r\n            var props = text;\r\n\r\n            for (var i = 0; i < props.length; i++) {\r\n\r\n                var code = '';\r\n                var rg = {\r\n                    id: props[i].CityID,\r\n                    code: props[i].ShortCityName,\r\n                    label: props[i].CityName\r\n                }\r\n                rg.order = (10 + i);\r\n                if (rg.label === 'Hà Nội') rg.order = 1;\r\n                if (rg.label === 'Tp.HCM') rg.order = 2;\r\n                if (rg.label === 'Đà Nẵng') rg.order = 3;\r\n                if (rg.label === 'Hải Phòng') rg.order = 4;\r\n                if (rg.label === 'Cần Thơ') rg.order = 5;\r\n                regions.push(rg);\r\n            }\r\n\r\n            try {\r\n                IOUtils.state.remotes.app.regions = regions;\r\n            } catch (error) {}\r\n\r\n            try {\r\n                // var es = $('#autocompleteContainerMakeSearch .autocomplete-list-all li .combo-item');\r\n                // var hangxes = [];\r\n                // for (var i = 0; i < es.length; i++) {\r\n\r\n                // \tvar code = $(es[i]).attr('data-title');\r\n                // \tvar label = $(es[i]).text();\r\n                // \tvar id = $(es[i]).attr('rel'); \r\n                // \t(id !== null && id !== undefined) && code && label && hangxes.push({\r\n                // \t\tcode: $(es[i]).attr('data-title'),\r\n                // \t\tlabel: label,\r\n                // \t\tid: id\r\n                // \t})\r\n                // }\r\n\r\n                // console.info(JSON.stringify(hangxes))\r\n                IOUtils.state.remotes.app.hangxes = [{\r\n                    \"code\": \"0\",\r\n                    \"label\": \"Tất cả\",\r\n                    \"id\": \"0\"\r\n                }, {\r\n                    \"code\": \"acura\",\r\n                    \"label\": \"Acura\",\r\n                    \"id\": \"1\"\r\n                }, {\r\n                    \"code\": \"alfa-romeo\",\r\n                    \"label\": \"Alfa Romeo\",\r\n                    \"id\": \"2\"\r\n                }, {\r\n                    \"code\": \"asia\",\r\n                    \"label\": \"Asia\",\r\n                    \"id\": \"3\"\r\n                }, {\r\n                    \"code\": \"aston-martin\",\r\n                    \"label\": \"Aston Martin\",\r\n                    \"id\": \"4\"\r\n                }, {\r\n                    \"code\": \"audi\",\r\n                    \"label\": \"Audi\",\r\n                    \"id\": \"5\"\r\n                }, {\r\n                    \"code\": \"baic\",\r\n                    \"label\": \"BAIC\",\r\n                    \"id\": \"104\"\r\n                }, {\r\n                    \"code\": \"bentley\",\r\n                    \"label\": \"Bentley\",\r\n                    \"id\": \"6\"\r\n                }, {\r\n                    \"code\": \"bmw\",\r\n                    \"label\": \"BMW\",\r\n                    \"id\": \"7\"\r\n                }, {\r\n                    \"code\": \"bugatti\",\r\n                    \"label\": \"Bugatti\",\r\n                    \"id\": \"129\"\r\n                }, {\r\n                    \"code\": \"buick\",\r\n                    \"label\": \"Buick\",\r\n                    \"id\": \"8\"\r\n                }, {\r\n                    \"code\": \"byd\",\r\n                    \"label\": \"BYD\",\r\n                    \"id\": \"9\"\r\n                }, {\r\n                    \"code\": \"cadillac\",\r\n                    \"label\": \"Cadillac\",\r\n                    \"id\": \"10\"\r\n                }, {\r\n                    \"code\": \"changan\",\r\n                    \"label\": \"Changan\",\r\n                    \"id\": \"11\"\r\n                }, {\r\n                    \"code\": \"chenglong\",\r\n                    \"label\": \"Chenglong\",\r\n                    \"id\": \"131\"\r\n                }, {\r\n                    \"code\": \"chery\",\r\n                    \"label\": \"Chery\",\r\n                    \"id\": \"12\"\r\n                }, {\r\n                    \"code\": \"chevrolet\",\r\n                    \"label\": \"Chevrolet\",\r\n                    \"id\": \"13\"\r\n                }, {\r\n                    \"code\": \"chien-thang\",\r\n                    \"label\": \"Chiến Thắng\",\r\n                    \"id\": \"128\"\r\n                }, {\r\n                    \"code\": \"chrysler\",\r\n                    \"label\": \"Chrysler\",\r\n                    \"id\": \"14\"\r\n                }, {\r\n                    \"code\": \"chuyen-dung\",\r\n                    \"label\": \"Chuyên dùng\",\r\n                    \"id\": \"88\"\r\n                }, {\r\n                    \"code\": \"citroen\",\r\n                    \"label\": \"Citroen\",\r\n                    \"id\": \"15\"\r\n                }, {\r\n                    \"code\": \"cmc\",\r\n                    \"label\": \"CMC\",\r\n                    \"id\": \"122\"\r\n                }, {\r\n                    \"code\": \"cuu-long\",\r\n                    \"label\": \"Cửu Long\",\r\n                    \"id\": \"114\"\r\n                }, {\r\n                    \"code\": \"daehan\",\r\n                    \"label\": \"Daehan\",\r\n                    \"id\": \"126\"\r\n                }, {\r\n                    \"code\": \"daewoo\",\r\n                    \"label\": \"Daewoo\",\r\n                    \"id\": \"16\"\r\n                }, {\r\n                    \"code\": \"daihatsu\",\r\n                    \"label\": \"Daihatsu\",\r\n                    \"id\": \"17\"\r\n                }, {\r\n                    \"code\": \"do-thanh\",\r\n                    \"label\": \"Đô thành \",\r\n                    \"id\": \"127\"\r\n                }, {\r\n                    \"code\": \"dodge\",\r\n                    \"label\": \"Dodge\",\r\n                    \"id\": \"18\"\r\n                }, {\r\n                    \"code\": \"dongben\",\r\n                    \"label\": \"Dongben\",\r\n                    \"id\": \"112\"\r\n                }, {\r\n                    \"code\": \"dongfeng\",\r\n                    \"label\": \"Dongfeng (DFM)\",\r\n                    \"id\": \"111\"\r\n                }, {\r\n                    \"code\": \"eagle\",\r\n                    \"label\": \"Eagle\",\r\n                    \"id\": \"19\"\r\n                }, {\r\n                    \"code\": \"fairy\",\r\n                    \"label\": \"Fairy\",\r\n                    \"id\": \"105\"\r\n                }, {\r\n                    \"code\": \"faw\",\r\n                    \"label\": \"FAW\",\r\n                    \"id\": \"117\"\r\n                }, {\r\n                    \"code\": \"ferrari\",\r\n                    \"label\": \"Ferrari\",\r\n                    \"id\": \"20\"\r\n                }, {\r\n                    \"code\": \"fiat\",\r\n                    \"label\": \"Fiat\",\r\n                    \"id\": \"21\"\r\n                }, {\r\n                    \"code\": \"ford\",\r\n                    \"label\": \"Ford\",\r\n                    \"id\": \"22\"\r\n                }, {\r\n                    \"code\": \"fuso\",\r\n                    \"label\": \"Fuso\",\r\n                    \"id\": \"116\"\r\n                }, {\r\n                    \"code\": \"gaz\",\r\n                    \"label\": \"Gaz\",\r\n                    \"id\": \"23\"\r\n                }, {\r\n                    \"code\": \"geely\",\r\n                    \"label\": \"Geely\",\r\n                    \"id\": \"24\"\r\n                }, {\r\n                    \"code\": \"genesis\",\r\n                    \"label\": \"Genesis\",\r\n                    \"id\": \"118\"\r\n                }, {\r\n                    \"code\": \"geo\",\r\n                    \"label\": \"Geo\",\r\n                    \"id\": \"25\"\r\n                }, {\r\n                    \"code\": \"gmc\",\r\n                    \"label\": \"GMC\",\r\n                    \"id\": \"26\"\r\n                }, {\r\n                    \"code\": \"great-wall\",\r\n                    \"label\": \"Great wall\",\r\n                    \"id\": \"121\"\r\n                }, {\r\n                    \"code\": \"haima\",\r\n                    \"label\": \"Haima\",\r\n                    \"id\": \"27\"\r\n                }, {\r\n                    \"code\": \"hang-khac\",\r\n                    \"label\": \"Hãng khác\",\r\n                    \"id\": \"101\"\r\n                }, {\r\n                    \"code\": \"hino\",\r\n                    \"label\": \"Hino\",\r\n                    \"id\": \"86\"\r\n                }, {\r\n                    \"code\": \"honda\",\r\n                    \"label\": \"Honda\",\r\n                    \"id\": \"28\"\r\n                }, {\r\n                    \"code\": \"howo\",\r\n                    \"label\": \"Howo\",\r\n                    \"id\": \"119\"\r\n                }, {\r\n                    \"code\": \"hummer\",\r\n                    \"label\": \"Hummer\",\r\n                    \"id\": \"29\"\r\n                }, {\r\n                    \"code\": \"hyundai\",\r\n                    \"label\": \"Hyundai\",\r\n                    \"id\": \"30\"\r\n                }, {\r\n                    \"code\": \"infiniti\",\r\n                    \"label\": \"Infiniti\",\r\n                    \"id\": \"31\"\r\n                }, {\r\n                    \"code\": \"isuzu\",\r\n                    \"label\": \"Isuzu\",\r\n                    \"id\": \"32\"\r\n                }, {\r\n                    \"code\": \"jac\",\r\n                    \"label\": \"JAC\",\r\n                    \"id\": \"110\"\r\n                }, {\r\n                    \"code\": \"jaguar\",\r\n                    \"label\": \"Jaguar\",\r\n                    \"id\": \"33\"\r\n                }, {\r\n                    \"code\": \"jeep\",\r\n                    \"label\": \"Jeep\",\r\n                    \"id\": \"34\"\r\n                }, {\r\n                    \"code\": \"jonway\",\r\n                    \"label\": \"Jonway\",\r\n                    \"id\": \"123\"\r\n                }, {\r\n                    \"code\": \"jrd\",\r\n                    \"label\": \"JRD\",\r\n                    \"id\": \"108\"\r\n                }, {\r\n                    \"code\": \"kamaz\",\r\n                    \"label\": \"Kamaz\",\r\n                    \"id\": \"120\"\r\n                }, {\r\n                    \"code\": \"kia\",\r\n                    \"label\": \"Kia\",\r\n                    \"id\": \"35\"\r\n                }, {\r\n                    \"code\": \"lada\",\r\n                    \"label\": \"Lada\",\r\n                    \"id\": \"36\"\r\n                }, {\r\n                    \"code\": \"lamborghini\",\r\n                    \"label\": \"Lamborghini\",\r\n                    \"id\": \"37\"\r\n                }, {\r\n                    \"code\": \"lancia\",\r\n                    \"label\": \"Lancia\",\r\n                    \"id\": \"38\"\r\n                }, {\r\n                    \"code\": \"landrover\",\r\n                    \"label\": \"LandRover\",\r\n                    \"id\": \"39\"\r\n                }, {\r\n                    \"code\": \"lexus\",\r\n                    \"label\": \"Lexus\",\r\n                    \"id\": \"40\"\r\n                }, {\r\n                    \"code\": \"lifan\",\r\n                    \"label\": \"Lifan\",\r\n                    \"id\": \"41\"\r\n                }, {\r\n                    \"code\": \"lincoln\",\r\n                    \"label\": \"Lincoln\",\r\n                    \"id\": \"42\"\r\n                }, {\r\n                    \"code\": \"lotus\",\r\n                    \"label\": \"Lotus\",\r\n                    \"id\": \"43\"\r\n                }, {\r\n                    \"code\": \"luxgen\",\r\n                    \"label\": \"Luxgen\",\r\n                    \"id\": \"44\"\r\n                }, {\r\n                    \"code\": \"maserati\",\r\n                    \"label\": \"Maserati\",\r\n                    \"id\": \"46\"\r\n                }, {\r\n                    \"code\": \"maybach\",\r\n                    \"label\": \"Maybach\",\r\n                    \"id\": \"47\"\r\n                }, {\r\n                    \"code\": \"mazda\",\r\n                    \"label\": \"Mazda\",\r\n                    \"id\": \"48\"\r\n                }, {\r\n                    \"code\": \"mclaren\",\r\n                    \"label\": \"McLaren\",\r\n                    \"id\": \"102\"\r\n                }, {\r\n                    \"code\": \"mekong\",\r\n                    \"label\": \"Mekong\",\r\n                    \"id\": \"49\"\r\n                }, {\r\n                    \"code\": \"mercedes-benz\",\r\n                    \"label\": \"Mercedes-Benz\",\r\n                    \"id\": \"92\"\r\n                }, {\r\n                    \"code\": \"mercury\",\r\n                    \"label\": \"Mercury\",\r\n                    \"id\": \"51\"\r\n                }, {\r\n                    \"code\": \"mg\",\r\n                    \"label\": \"MG\",\r\n                    \"id\": \"52\"\r\n                }, {\r\n                    \"code\": \"mini\",\r\n                    \"label\": \"Mini\",\r\n                    \"id\": \"53\"\r\n                }, {\r\n                    \"code\": \"mitsubishi\",\r\n                    \"label\": \"Mitsubishi\",\r\n                    \"id\": \"54\"\r\n                }, {\r\n                    \"code\": \"nissan\",\r\n                    \"label\": \"Nissan\",\r\n                    \"id\": \"55\"\r\n                }, {\r\n                    \"code\": \"oldsmobile\",\r\n                    \"label\": \"Oldsmobile\",\r\n                    \"id\": \"56\"\r\n                }, {\r\n                    \"code\": \"opel\",\r\n                    \"label\": \"Opel\",\r\n                    \"id\": \"57\"\r\n                }, {\r\n                    \"code\": \"peugeot\",\r\n                    \"label\": \"Peugeot\",\r\n                    \"id\": \"58\"\r\n                }, {\r\n                    \"code\": \"plymouth\",\r\n                    \"label\": \"Plymouth\",\r\n                    \"id\": \"59\"\r\n                }, {\r\n                    \"code\": \"pmc\",\r\n                    \"label\": \"PMC\",\r\n                    \"id\": \"89\"\r\n                }, {\r\n                    \"code\": \"pontiac\",\r\n                    \"label\": \"Pontiac\",\r\n                    \"id\": \"60\"\r\n                }, {\r\n                    \"code\": \"porsche\",\r\n                    \"label\": \"Porsche\",\r\n                    \"id\": \"61\"\r\n                }, {\r\n                    \"code\": \"proton\",\r\n                    \"label\": \"Proton\",\r\n                    \"id\": \"62\"\r\n                }, {\r\n                    \"code\": \"renault\",\r\n                    \"label\": \"Renault\",\r\n                    \"id\": \"63\"\r\n                }, {\r\n                    \"code\": \"riich\",\r\n                    \"label\": \"Riich\",\r\n                    \"id\": \"125\"\r\n                }, {\r\n                    \"code\": \"rolls-royce\",\r\n                    \"label\": \"Rolls-Royce\",\r\n                    \"id\": \"93\"\r\n                }, {\r\n                    \"code\": \"rover\",\r\n                    \"label\": \"Rover\",\r\n                    \"id\": \"65\"\r\n                }, {\r\n                    \"code\": \"saab\",\r\n                    \"label\": \"Saab\",\r\n                    \"id\": \"66\"\r\n                }, {\r\n                    \"code\": \"samco\",\r\n                    \"label\": \"Samco\",\r\n                    \"id\": \"115\"\r\n                }, {\r\n                    \"code\": \"samsung\",\r\n                    \"label\": \"Samsung\",\r\n                    \"id\": \"67\"\r\n                }, {\r\n                    \"code\": \"santana\",\r\n                    \"label\": \"Santana\",\r\n                    \"id\": \"68\"\r\n                }, {\r\n                    \"code\": \"saturn\",\r\n                    \"label\": \"Saturn\",\r\n                    \"id\": \"69\"\r\n                }, {\r\n                    \"code\": \"scion\",\r\n                    \"label\": \"Scion\",\r\n                    \"id\": \"70\"\r\n                }, {\r\n                    \"code\": \"seat\",\r\n                    \"label\": \"Seat\",\r\n                    \"id\": \"71\"\r\n                }, {\r\n                    \"code\": \"shuguang\",\r\n                    \"label\": \"Shuguang\",\r\n                    \"id\": \"113\"\r\n                }, {\r\n                    \"code\": \"skoda\",\r\n                    \"label\": \"Skoda\",\r\n                    \"id\": \"72\"\r\n                }, {\r\n                    \"code\": \"smart\",\r\n                    \"label\": \"Smart\",\r\n                    \"id\": \"73\"\r\n                }, {\r\n                    \"code\": \"ssangyong\",\r\n                    \"label\": \"Ssangyong\",\r\n                    \"id\": \"74\"\r\n                }, {\r\n                    \"code\": \"subaru\",\r\n                    \"label\": \"Subaru\",\r\n                    \"id\": \"75\"\r\n                }, {\r\n                    \"code\": \"suzuki\",\r\n                    \"label\": \"Suzuki\",\r\n                    \"id\": \"76\"\r\n                }, {\r\n                    \"code\": \"sym\",\r\n                    \"label\": \"SYM\",\r\n                    \"id\": \"77\"\r\n                }, {\r\n                    \"code\": \"tata\",\r\n                    \"label\": \"Tata\",\r\n                    \"id\": \"83\"\r\n                }, {\r\n                    \"code\": \"tesla\",\r\n                    \"label\": \"Tesla\",\r\n                    \"id\": \"109\"\r\n                }, {\r\n                    \"code\": \"thaco\",\r\n                    \"label\": \"Thaco\",\r\n                    \"id\": \"78\"\r\n                }, {\r\n                    \"code\": \"tobe\",\r\n                    \"label\": \"Tobe\",\r\n                    \"id\": \"94\"\r\n                }, {\r\n                    \"code\": \"toyota\",\r\n                    \"label\": \"Toyota\",\r\n                    \"id\": \"79\"\r\n                }, {\r\n                    \"code\": \"triumph-spitfire\",\r\n                    \"label\": \"Triumph Spitfire\",\r\n                    \"id\": \"124\"\r\n                }, {\r\n                    \"code\": \"uaz\",\r\n                    \"label\": \"UAZ\",\r\n                    \"id\": \"87\"\r\n                }, {\r\n                    \"code\": \"veam\",\r\n                    \"label\": \"Veam\",\r\n                    \"id\": \"106\"\r\n                }, {\r\n                    \"code\": \"veam-motor\",\r\n                    \"label\": \"Veam Motor\",\r\n                    \"id\": \"96\"\r\n                }, {\r\n                    \"code\": \"vinaxuki\",\r\n                    \"label\": \"Vinaxuki\",\r\n                    \"id\": \"80\"\r\n                }, {\r\n                    \"code\": \"vinfast\",\r\n                    \"label\": \"VinFast\",\r\n                    \"id\": \"130\"\r\n                }, {\r\n                    \"code\": \"volkswagen\",\r\n                    \"label\": \"Volkswagen\",\r\n                    \"id\": \"81\"\r\n                }, {\r\n                    \"code\": \"volvo\",\r\n                    \"label\": \"Volvo\",\r\n                    \"id\": \"82\"\r\n                }, {\r\n                    \"code\": \"tai\",\r\n                    \"label\": \"Xe tải\",\r\n                    \"id\": \"90\"\r\n                }, {\r\n                    \"code\": \"zotye\",\r\n                    \"label\": \"Zotye\",\r\n                    \"id\": \"103\"\r\n                }];\r\n            } catch (error) {\r\n\r\n            }\r\n\r\n            try {\r\n\r\n                // var es = $('#SecondHandContainer a');\r\n                // var tinhtrangs = [];\r\n                // for (var i = 0; i < es.length; i++) {\r\n\r\n                // \tvar code = $(es[i]).attr('data-title');\r\n                // \tvar label = $(es[i]).text();\r\n                // \tvar id = $(es[i]).attr('rel'); \r\n                // \t(id !== null && id !== undefined) && code && label && tinhtrangs.push({\r\n                // \t\tcode: $(es[i]).attr('data-title'),\r\n                // \t\tlabel: label,\r\n                // \t\tid: id\r\n                // \t})\r\n                // }\r\n                // console.info(JSON.stringify(tinhtrangs))\r\n\r\n                IOUtils.state.remotes.app.tinhtrangs = [{\r\n                    \"code\": \"0\",\r\n                    \"label\": \"Tất cả\",\r\n                    \"id\": \"0\"\r\n                }, {\r\n                    \"code\": \"8388608\",\r\n                    \"label\": \"Đã qua sử dụng\",\r\n                    \"id\": \"8388608\"\r\n                }, {\r\n                    \"code\": \"16777216\",\r\n                    \"label\": \"Mới\",\r\n                    \"id\": \"16777216\"\r\n                }];\r\n            } catch (error) {\r\n\r\n            }\r\n\r\n            try {\r\n\r\n                // var es = $('#MadeInContainer a');\r\n                // var xuatxus = [];\r\n                // for (var i = 0; i < es.length; i++) {\r\n\r\n                // \tvar code = $(es[i]).attr('data-title');\r\n                // \tvar label = $(es[i]).text();\r\n                // \tvar id = $(es[i]).attr('rel'); \r\n                // \t(id !== null && id !== undefined) && code && label && xuatxus.push({\r\n                // \t\tcode: $(es[i]).attr('data-title'),\r\n                // \t\tlabel: label,\r\n                // \t\tid: id\r\n                // \t})\r\n                // }\r\n\r\n                // console.info(JSON.stringify(xuatxus))\r\n                IOUtils.state.remotes.app.xuatxus = [{\r\n                    \"code\": \"0\",\r\n                    \"label\": \"Tất cả\",\r\n                    \"id\": \"0\"\r\n                }, {\r\n                    \"code\": \"268435456\",\r\n                    \"label\": \"Trong nước\",\r\n                    \"id\": \"268435456\"\r\n                }, {\r\n                    \"code\": \"536870912\",\r\n                    \"label\": \"Nhập khẩu\",\r\n                    \"id\": \"536870912\"\r\n                }]\r\n            } catch (error) {\r\n\r\n            }\r\n\r\n            try {\r\n\r\n                // var es = $('#FuelTypeContainer a');\r\n                // var nhienlieus = [];\r\n                // for (var i = 0; i < es.length; i++) {\r\n\r\n                // \tvar code = $(es[i]).attr('data-title');\r\n                // \tvar label = $(es[i]).text();\r\n                // \tvar id = $(es[i]).attr('rel'); \r\n                // \t(id !== null && id !== undefined) && code && label && nhienlieus.push({\r\n                // \t\tcode: $(es[i]).attr('data-title'),\r\n                // \t\tlabel: label,\r\n                // \t\tid: id\r\n                // \t})\r\n                // }\r\n\r\n                // console.info(JSON.stringify(nhienlieus))\r\n                IOUtils.state.remotes.app.nhienlieus = [{\r\n                    \"code\": \"0\",\r\n                    \"label\": \"Tất cả\",\r\n                    \"id\": \"0\"\r\n                }, {\r\n                    \"code\": \"2\",\r\n                    \"label\": \"Xăng\",\r\n                    \"id\": \"2\"\r\n                }, {\r\n                    \"code\": \"4\",\r\n                    \"label\": \"Diesel\",\r\n                    \"id\": \"4\"\r\n                }, {\r\n                    \"code\": \"8\",\r\n                    \"label\": \"Hybrid\",\r\n                    \"id\": \"8\"\r\n                }, {\r\n                    \"code\": \"16\",\r\n                    \"label\": \"Điện\",\r\n                    \"id\": \"16\"\r\n                }, {\r\n                    \"code\": \"32\",\r\n                    \"label\": \"Loại khác\",\r\n                    \"id\": \"32\"\r\n                }];\r\n            } catch (error) {\r\n\r\n            }\r\n\r\n            try {\r\n\r\n                // var es = $('#TransmissionContainer a');\r\n                // var hopsos = [];\r\n                // for (var i = 0; i < es.length; i++) {\r\n\r\n                // \tvar code = $(es[i]).attr('data-title');\r\n                // \tvar label = $(es[i]).text();\r\n                // \tvar id = $(es[i]).attr('rel'); \r\n                // \t(id !== null && id !== undefined) && code && label && hopsos.push({\r\n                // \t\tcode: $(es[i]).attr('data-title'),\r\n                // \t\tlabel: label,\r\n                // \t\tid: id\r\n                // \t})\r\n                // }\r\n\r\n                // console.info(JSON.stringify(hopsos))\r\n                IOUtils.state.remotes.app.hopsos = [{\r\n                    \"code\": \"0\",\r\n                    \"label\": \"Tất cả\",\r\n                    \"id\": \"0\"\r\n                }, {\r\n                    \"code\": \"33554432\",\r\n                    \"label\": \"Số tay\",\r\n                    \"id\": \"33554432\"\r\n                }, {\r\n                    \"code\": \"67108864\",\r\n                    \"label\": \"Số tự động\",\r\n                    \"id\": \"67108864\"\r\n                }, {\r\n                    \"code\": \"134217728\",\r\n                    \"label\": \"Số hỗn hợp\",\r\n                    \"id\": \"134217728\"\r\n                }]\r\n            } catch (error) {\r\n\r\n            }\r\n\r\n            try {\r\n                // var es = $('#ClassificationsContainer .selectoptioncontainer_item a');\r\n                // var kieudangs = [];\r\n                // for (var i = 0; i < es.length; i++) {\r\n\r\n                // \tvar code = $(es[i]).attr('data-title').trim();\r\n                // \tvar label = $(es[i]).text().trim();\r\n                // \tvar id = $(es[i]).attr('rel').trim(); \r\n                // \t(id !== null && id !== undefined) && code && label && kieudangs.push({\r\n                // \t\tcode: $(es[i]).attr('data-title'),\r\n                // \t\tlabel: label,\r\n                // \t\tid: id\r\n                // \t})\r\n                // }\r\n\r\n                // console.info(JSON.stringify(kieudangs))\r\n                IOUtils.state.remotes.app.kieudangs = [{\r\n                    \"code\": \"0\",\r\n                    \"label\": \"Tất cả\",\r\n                    \"id\": \"0\"\r\n                }, {\r\n                    \"code\": \"16384\",\r\n                    \"label\": \"Sedan\",\r\n                    \"id\": \"16384\"\r\n                }, {\r\n                    \"code\": \"32768\",\r\n                    \"label\": \"SUV\",\r\n                    \"id\": \"32768\"\r\n                }, {\r\n                    \"code\": \"2147483648\",\r\n                    \"label\": \"Pick-up Truck\",\r\n                    \"id\": \"2147483648\"\r\n                }, {\r\n                    \"code\": \"131072\",\r\n                    \"label\": \"CUV\",\r\n                    \"id\": \"131072\"\r\n                }, {\r\n                    \"code\": \"1073741824\",\r\n                    \"label\": \"MPV\",\r\n                    \"id\": \"1073741824\"\r\n                }, {\r\n                    \"code\": \"262144\",\r\n                    \"label\": \"Hatchback\",\r\n                    \"id\": \"262144\"\r\n                }, {\r\n                    \"code\": \"1048576\",\r\n                    \"label\": \"Truck\",\r\n                    \"id\": \"1048576\"\r\n                }, {\r\n                    \"code\": \"2097152\",\r\n                    \"label\": \"Van/Minivan\",\r\n                    \"id\": \"2097152\"\r\n                }, {\r\n                    \"code\": \"8589934592\",\r\n                    \"label\": \"City Car\",\r\n                    \"id\": \"8589934592\"\r\n                }, {\r\n                    \"code\": \"4294967296\",\r\n                    \"label\": \"Sport Car\",\r\n                    \"id\": \"4294967296\"\r\n                }, {\r\n                    \"code\": \"65536\",\r\n                    \"label\": \"Coupe\",\r\n                    \"id\": \"65536\"\r\n                }, {\r\n                    \"code\": \"524288\",\r\n                    \"label\": \"Convertible\",\r\n                    \"id\": \"524288\"\r\n                }, {\r\n                    \"code\": \"4194304\",\r\n                    \"label\": \"Wagon\",\r\n                    \"id\": \"4194304\"\r\n                }, {\r\n                    \"code\": \"274877906944\",\r\n                    \"label\": \"Special Purpose\",\r\n                    \"id\": \"274877906944\"\r\n                }];\r\n            } catch (error) {\r\n\r\n            }\r\n\r\n            try {\r\n\r\n                // var es = $('#NumOfSeatContainer a');\r\n                // var sochos = [];\r\n                // for (var i = 0; i < es.length; i++) {\r\n\r\n                // \tvar code = $(es[i]).attr('data-title');\r\n                // \tvar label = $(es[i]).text();\r\n                // \tvar id = $(es[i]).attr('rel'); \r\n                // \t(id !== null && id !== undefined) && code && label && sochos.push({\r\n                // \t\tcode: $(es[i]).attr('data-title'),\r\n                // \t\tlabel: label,\r\n                // \t\tid: id\r\n                // \t})\r\n                // }\r\n\r\n                // console.info(JSON.stringify(sochos))\r\n\r\n                IOUtils.state.remotes.app.sochos = [{\r\n                    \"code\": \"0\",\r\n                    \"label\": \"Tất cả\",\r\n                    \"id\": \"0\"\r\n                }, {\r\n                    \"code\": \"64\",\r\n                    \"label\": \"2 chỗ\",\r\n                    \"id\": \"64\"\r\n                }, {\r\n                    \"code\": \"128\",\r\n                    \"label\": \"4 chỗ\",\r\n                    \"id\": \"128\"\r\n                }, {\r\n                    \"code\": \"256\",\r\n                    \"label\": \"5 chỗ\",\r\n                    \"id\": \"256\"\r\n                }, {\r\n                    \"code\": \"512\",\r\n                    \"label\": \"7 chỗ\",\r\n                    \"id\": \"512\"\r\n                }, {\r\n                    \"code\": \"1024\",\r\n                    \"label\": \"9 chỗ\",\r\n                    \"id\": \"1024\"\r\n                }, {\r\n                    \"code\": \"2048\",\r\n                    \"label\": \"12 chỗ\",\r\n                    \"id\": \"2048\"\r\n                }, {\r\n                    \"code\": \"4096\",\r\n                    \"label\": \"16 chỗ\",\r\n                    \"id\": \"4096\"\r\n                }, {\r\n                    \"code\": \"549755813888\",\r\n                    \"label\": \"24 chỗ\",\r\n                    \"id\": \"549755813888\"\r\n                }, {\r\n                    \"code\": \"1099511627776\",\r\n                    \"label\": \"29 chỗ\",\r\n                    \"id\": \"1099511627776\"\r\n                }, {\r\n                    \"code\": \"2199023255552\",\r\n                    \"label\": \"45 chỗ\",\r\n                    \"id\": \"2199023255552\"\r\n                }, {\r\n                    \"code\": \"8192\",\r\n                    \"label\": \"Khác\",\r\n                    \"id\": \"8192\"\r\n                }];\r\n            } catch (error) {\r\n\r\n            }\r\n            try {\r\n\r\n                // var es = $('#NumOfDoorContainer a');\r\n                // var socuas = [];\r\n                // for (var i = 0; i < es.length; i++) {\r\n\r\n                // \tvar code = $(es[i]).attr('data-title');\r\n                // \tvar label = $(es[i]).text();\r\n                // \tvar id = $(es[i]).attr('rel'); \r\n                // \t(id !== null && id !== undefined) && code && label && socuas.push({\r\n                // \t\tcode: $(es[i]).attr('data-title'),\r\n                // \t\tlabel: label,\r\n                // \t\tid: id\r\n                // \t})\r\n                // }\r\n\r\n                // console.info(JSON.stringify(socuas))\r\n\r\n                IOUtils.state.remotes.app.socuas = [{\r\n                    \"code\": \"0\",\r\n                    \"label\": \"Tất cả\",\r\n                    \"id\": \"0\"\r\n                }, {\r\n                    \"code\": \"17179869184\",\r\n                    \"label\": \"2 cửa\",\r\n                    \"id\": \"17179869184\"\r\n                }, {\r\n                    \"code\": \"34359738368\",\r\n                    \"label\": \"3 cửa\",\r\n                    \"id\": \"34359738368\"\r\n                }, {\r\n                    \"code\": \"68719476736\",\r\n                    \"label\": \"4 cửa\",\r\n                    \"id\": \"68719476736\"\r\n                }, {\r\n                    \"code\": \"137438953472\",\r\n                    \"label\": \"5 cửa\",\r\n                    \"id\": \"137438953472\"\r\n                }];\r\n            } catch (error) {\r\n\r\n            }\r\n\r\n            console.info(regions);\r\n            cb && cb(true, regions);\r\n\r\n        })\r\n        .catch(function(error) {\r\n            console.info(error + \"at getOtoRegion\");\r\n            cb && cb(false, []);\r\n\r\n        })\r\n}","getStoredListOto":"function getStoredListOto(filter, cb, cheerio) {\r\n\r\n    filter = filter || {};\r\n\r\n    var region = filter.region || {};\r\n    var khoanggia = filter.khoanggia || {};\r\n\r\n    var regionId = region.id;\r\n    var minPrice = Number(((khoanggia.value || {}).value || {}).from);\r\n    var maxPrice = Number(((khoanggia.value || {}).value || {}).to);\r\n    var items = [];\r\n    var v = {};\r\n    try {\r\n        v = IOUtils.state.stored;\r\n    } catch (error) {\r\n        v = {};\r\n    }\r\n\r\n    var mapRegion = {};\r\n    try {\r\n\r\n        mapRegion = IOUtils.state.remotes.app.mapRegion || {};\r\n        if (!Object.keys(mapRegion).length) {\r\n            var regions = IOUtils.state.remotes.app.regions || [];\r\n            for (var i = 0; i < regions.length; i++) {\r\n                mapRegion[regions[i].code] = regions[i].label;\r\n            }\r\n            IOUtils.state.remotes.app.mapRegion = mapRegion;\r\n        }\r\n    } catch (error) {}\r\n\r\n    v.listId = v.listId || [];\r\n    v.mapId = v.mapId || {};\r\n\r\n    for (var i = 0; i < v.listId.length; i++) {\r\n        try {\r\n            var itemId = v.listId[i];\r\n            var item = v.mapId[itemId];\r\n            console.info(\"item: \" + JSON.stringify(item))\r\n            if (item) {\r\n\r\n                if (regionId && regionId != -1 && item.city != mapRegion[regionId]) {\r\n                    console.info(\"false regionId \" + regionId + \":  \" + mapRegion[regionId] + \" <> \" + item.city);\r\n                    continue;\r\n                }\r\n                if (minPrice && minPrice > 0 && item['priceNum'] < minPrice * 1000000) {\r\n                    console.info(\"false min\");\r\n                    continue;\r\n                }\r\n                if (maxPrice && maxPrice > 0 && item['priceNum'] > maxPrice * 1000000) {\r\n                    console.info(\"false max\");\r\n                    continue;\r\n                }\r\n                if (!item.stored) {\r\n                    v.listId.splice(index, 1);\r\n                    continue;\r\n                }\r\n                items.push(item);\r\n            }\r\n        } catch (error) {\r\n            console.info(error)\r\n        };\r\n    }\r\n    cb && cb(true, items);\r\n    return items;\r\n}","getDongXe":"function getDongXe(filter, cb, cheerio) {\r\n\r\n    var link = 'https://oto.com.vn/Model/SearchByName/' + filter.hangxe.id + '/allmodel';\r\n    fetch(link, {\r\n            headers: new Headers({\r\n                'User-Agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/74.0.3729.157 Safari/537.36',\r\n            })\r\n        })\r\n        .then(function(rp) {\r\n            return rp.json()\r\n        })\r\n        .then(function(rp) {\r\n\r\n            //https://www.npmjs.com/package/react-native-cheerio\r\n            $ = cheerio.load('<div></div>');\r\n            var dongxes = [];\r\n            for (var i = 0; i < rp.length; i++) {\r\n                dongxes.push({\r\n                    code: rp[i].ShortModelName,\r\n                    label: $('<div>' + rp[i].ModelName + '</div>').text(),\r\n                    id: rp[i].ModelID\r\n                })\r\n            }\r\n\r\n            IOUtils.state.remotes.app.dongxes = dongxes;\r\n            //console.info(rp);\r\n            cb && cb(true, dongxes);\r\n\r\n        })\r\n        .catch(function(error) {\r\n            console.info(error);\r\n            cb && cb(false, []);\r\n\r\n        })\r\n}"},"ip":"2402:800:6371:5fde:1c3:a15c:9a25:c81d"}